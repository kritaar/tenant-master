INSTRUCCIONES DE INSTALACION - TENANT MASTER

PASO 1: ESTRUCTURA DE CARPETAS
================================
Crear esta estructura en tu repositorio:

tenant-master/
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ infra/
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .env.example
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ postgres/.gitkeep
‚îÇ   ‚îú‚îÄ‚îÄ deployments/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TEMPLATE/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .env.example
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ postgres/.gitkeep
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ   ‚îî‚îÄ‚îÄ scripts/
‚îÇ       ‚îú‚îÄ‚îÄ provision_tenant.py
‚îÇ       ‚îú‚îÄ‚îÄ migrate_all.py
‚îÇ       ‚îî‚îÄ‚îÄ backup.sh
‚îî‚îÄ‚îÄ app/
    ‚îî‚îÄ‚îÄ backend/
        ‚îú‚îÄ‚îÄ Dockerfile
        ‚îú‚îÄ‚îÄ requirements.txt
        ‚îú‚îÄ‚îÄ manage.py
        ‚îú‚îÄ‚îÄ config/
        ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
        ‚îÇ   ‚îú‚îÄ‚îÄ settings.py
        ‚îÇ   ‚îú‚îÄ‚îÄ urls.py
        ‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py
        ‚îî‚îÄ‚îÄ panel/
            ‚îú‚îÄ‚îÄ __init__.py
            ‚îú‚îÄ‚îÄ apps.py
            ‚îú‚îÄ‚îÄ models.py
            ‚îú‚îÄ‚îÄ admin.py
            ‚îú‚îÄ‚îÄ views.py
            ‚îú‚îÄ‚îÄ urls.py
            ‚îú‚îÄ‚îÄ middleware.py
            ‚îú‚îÄ‚îÄ routers.py
            ‚îú‚îÄ‚îÄ api/
            ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
            ‚îÇ   ‚îú‚îÄ‚îÄ urls.py
            ‚îÇ   ‚îú‚îÄ‚îÄ views.py
            ‚îÇ   ‚îî‚îÄ‚îÄ serializers.py
            ‚îî‚îÄ‚îÄ templates/
                ‚îî‚îÄ‚îÄ panel/
                    ‚îú‚îÄ‚îÄ base.html
                    ‚îú‚îÄ‚îÄ login.html
                    ‚îú‚îÄ‚îÄ dashboard.html
                    ‚îú‚îÄ‚îÄ workspaces.html
                    ‚îú‚îÄ‚îÄ create_workspace.html
                    ‚îú‚îÄ‚îÄ workspace_detail.html
                    ‚îú‚îÄ‚îÄ clients.html
                    ‚îú‚îÄ‚îÄ deployments.html
                    ‚îú‚îÄ‚îÄ products.html
                    ‚îú‚îÄ‚îÄ databases.html
                    ‚îú‚îÄ‚îÄ activity.html
                    ‚îî‚îÄ‚îÄ settings.html

PASO 2: CONFIGURAR DNS
=======================
En tu proveedor de DNS (Cloudflare, etc):

1. A record: panel.surgir.online -> IP_DEL_VPS
2. A record: *.surgir.online -> IP_DEL_VPS (wildcard)

PASO 3: SUBIR A GITHUB
=======================
cd C:\Proyectos_vps\tenant_master
git add .
git commit -m "Initial commit - Tenant Master"
git push origin main

PASO 4: CREAR STACK EN PORTAINER
=================================
1. Ir a Portainer: http://IP_VPS:9000
2. Stacks -> Add Stack
3. Seleccionar "Repository"
4. Repository URL: https://github.com/kritaar/tenant_master
5. Repository reference: main
6. Compose path: infra/core/docker-compose.yml
7. Auto update: ACTIVAR (webhook o polling cada 5min)

8. Variables de entorno:
   LE_EMAIL=admin@surgir.online
   PANEL_DOMAIN=panel.surgir.online
   BASE_DOMAIN=surgir.online
   POSTGRES_PASSWORD=TU_PASSWORD_SEGURO_AQUI
   DJANGO_SECRET_KEY=GENERA_UNO_ALEATORIO_50_CHARS
   ALLOWED_HOSTS=panel.surgir.online,*.surgir.online,localhost
   DATABASE_URL=postgresql://tenant_admin:TU_PASSWORD@postgres:5432/tenant_master
   MASTER_USERNAME=admin
   DEBUG=False

9. Deploy el stack

PASO 5: CREAR SUPERUSUARIO
===========================
Esperar 2-3 minutos que levanten los contenedores

docker exec -it tenant-master-panel python manage.py createsuperuser

Usuario: admin
Email: admin@surgir.online
Password: TU_PASSWORD

PASO 6: CREAR PRODUCTOS INICIALES
==================================
docker exec tenant-master-panel python manage.py shell

Luego copiar y pegar:

from panel.models import Product
products = [
    {'name': 'inventory', 'display_name': 'Sistema de Inventario', 'icon': 'üì¶'},
    {'name': 'erp', 'display_name': 'Sistema ERP', 'icon': 'üíº'},
    {'name': 'shop', 'display_name': 'E-commerce', 'icon': 'üõí'},
    {'name': 'landing', 'display_name': 'Landing Pages', 'icon': 'üåê'}
]
for p in products:
    Product.objects.create(**p)
print('Productos creados')
exit()

PASO 7: ACCEDER AL PANEL
=========================
https://panel.surgir.online

Login: admin / TU_PASSWORD

LISTO! Ya puedes crear workspaces desde el panel
